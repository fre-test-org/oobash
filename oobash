#!/bin/bash

object() {
    if [ "${1:0:1}" == '.' ]; then
        local property="oob_${FUNCNAME[0]}_props[${1:1}]"
        if [ "$2" == "=" ]; then
            eval "${property}=$3"
        else
            eval "echo \${${property}}"
        fi
    fi
}

new () {
    # TODO: validate params
    class=$1
    name=$2
    class_definition=$(declare -f $class)
    instance_definition="${name}${class_definition#$class}"
    # semicolon because eval is going to mash this into one line
    echo "declare -A oob_${name}_props;"
    echo "$instance_definition"
}
