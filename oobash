#!/bin/bash

shopt -s expand_aliases

declare -a oob_instances
declare -a oob_properties

class() {
    _main() {
        echo $@
    }
    _init() {
        local props[bar]=baz
    }
    _main $@
}

new () {
    id=$RANDOM
    class_definition=$(declare -f $1)
    instance_definition="instances[${id}]${class_definition#$1}"
    echo "$instance_definition"
    echo -e "instances[${id}] " '$@'
}
